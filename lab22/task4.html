<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Healthcare AI Ethics: ECG Analysis & Human Oversight</title>
    <style>
        :root {
            --primary: #0284c7;
            --warning: #f59e0b;
            --danger: #dc2626;
            --success: #059669;
            --surface: #ffffff;
            --text: #1f2937;
        }
        body {
            font-family: system-ui, -apple-system, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            color: var(--text);
        }
        .warning-box {
            background: #fff7ed;
            border: 2px solid var(--warning);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .demo-container {
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .ecg-visual {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            padding: 20px;
            margin: 20px 0;
        }
        #ecgCanvas {
            border: 1px solid #e2e8f0;
            background: #ffffff;
        }
        .approval-flow {
            display: flex;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        .approval-step {
            flex: 1;
            min-width: 200px;
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 4px;
            padding: 15px;
        }
        .responsibility-matrix {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        .responsibility-matrix th,
        .responsibility-matrix td {
            border: 1px solid #e5e7eb;
            padding: 12px;
            text-align: left;
        }
        .responsibility-matrix th {
            background: #f8fafc;
        }
        .analysis-result {
            margin: 20px 0;
            padding: 15px;
            border-radius: 4px;
        }
        .analysis-result.normal {
            background: #ecfdf5;
            border: 1px solid var(--success);
        }
        .analysis-result.warning {
            background: #fff7ed;
            border: 1px solid var(--warning);
        }
        .checklist {
            background: #f8fafc;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .checklist label {
            display: block;
            margin: 10px 0;
        }
        button {
            background: var(--primary);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
        }
        button:disabled {
            background: #9ca3af;
        }
    </style>
</head>
<body>
    <h1>Healthcare AI Ethics: ECG Analysis & Human Oversight</h1>

    <div class="warning-box">
        <h2>⚠️ Medical AI Implementation Notice</h2>
        <p>This is an educational demonstration to illustrate AI oversight principles in healthcare. It is NOT intended for clinical use. Real medical AI systems require:</p>
        <ul>
            <li>FDA approval and regulatory compliance</li>
            <li>Extensive clinical trials and validation</li>
            <li>Continuous monitoring and updates</li>
            <li>Integration with existing medical systems</li>
            <li>Comprehensive staff training</li>
        </ul>
    </div>

    <div class="demo-container">
        <h2>ECG Analysis Demo with Human Oversight</h2>
        <p>This demonstration shows a simplified ECG analysis process with mandatory human verification steps.</p>

        <div class="ecg-visual">
            <canvas id="ecgCanvas" width="800" height="200"></canvas>
            <div class="controls">
                <button id="generateECG">Generate Sample ECG</button>
                <button id="runAnalysis">Run AI Analysis</button>
            </div>
            <div id="analysisResult" class="analysis-result"></div>
        </div>

        <div class="checklist">
            <h3>Required Human Verification Checklist</h3>
            <form id="verificationForm">
                <label>
                    <input type="checkbox" required> Data quality verified (signal clarity, artifacts)
                </label>
                <label>
                    <input type="checkbox" required> AI analysis reviewed against clinical guidelines
                </label>
                <label>
                    <input type="checkbox" required> Patient history and context considered
                </label>
                <label>
                    <input type="checkbox" required> Secondary verification performed
                </label>
                <button type="submit" id="approveBtn" disabled>Approve Analysis</button>
            </form>
        </div>
    </div>

    <section>
        <h2>Critical Oversight Requirements in Healthcare AI</h2>

        <h3>Should Doctors Rely Fully on AI Outputs?</h3>
        <p>No, healthcare AI should be viewed as a supporting tool, not a replacement for clinical judgment. Here's why:</p>
        <ul>
            <li><strong>AI Limitations:</strong>
                <ul>
                    <li>May miss rare conditions not well-represented in training data</li>
                    <li>Cannot fully account for patient-specific context and history</li>
                    <li>May have biases from training data demographics</li>
                    <li>Lacks understanding of causality and complex medical relationships</li>
                </ul>
            </li>
            <li><strong>Clinical Expertise Required:</strong>
                <ul>
                    <li>Integration of multiple information sources</li>
                    <li>Understanding of patient-specific factors</li>
                    <li>Recognition of unusual presentations</li>
                    <li>Clinical intuition developed through experience</li>
                </ul>
            </li>
        </ul>

        <h3>Mandatory Oversight Before Hospital Deployment</h3>
        <div class="approval-flow">
            <div class="approval-step">
                <h4>1. Pre-Deployment Validation</h4>
                <ul>
                    <li>Clinical trials</li>
                    <li>Regulatory approval</li>
                    <li>Ethics committee review</li>
                    <li>Data privacy audit</li>
                </ul>
            </div>
            <div class="approval-step">
                <h4>2. Implementation Process</h4>
                <ul>
                    <li>Staff training program</li>
                    <li>Integration testing</li>
                    <li>Pilot phase monitoring</li>
                    <li>Emergency protocols</li>
                </ul>
            </div>
            <div class="approval-step">
                <h4>3. Ongoing Monitoring</h4>
                <ul>
                    <li>Performance metrics</li>
                    <li>Error tracking</li>
                    <li>Regular audits</li>
                    <li>Update validation</li>
                </ul>
            </div>
        </div>

        <h3>Responsibility Distribution</h3>
        <table class="responsibility-matrix">
            <tr>
                <th>Stakeholder</th>
                <th>Primary Responsibilities</th>
                <th>Accountability Areas</th>
            </tr>
            <tr>
                <td>Clinicians</td>
                <td>
                    <ul>
                        <li>Final diagnostic decisions</li>
                        <li>Patient care oversight</li>
                        <li>AI output verification</li>
                    </ul>
                </td>
                <td>
                    <ul>
                        <li>Patient outcomes</li>
                        <li>Treatment decisions</li>
                        <li>Clinical documentation</li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td>AI Developers</td>
                <td>
                    <ul>
                        <li>System accuracy</li>
                        <li>Performance monitoring</li>
                        <li>Technical updates</li>
                    </ul>
                </td>
                <td>
                    <ul>
                        <li>Algorithm reliability</li>
                        <li>Technical documentation</li>
                        <li>Known limitations</li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td>Healthcare Institution</td>
                <td>
                    <ul>
                        <li>Implementation oversight</li>
                        <li>Staff training</li>
                        <li>Protocol development</li>
                    </ul>
                </td>
                <td>
                    <ul>
                        <li>System integration</li>
                        <li>Policy compliance</li>
                        <li>Risk management</li>
                    </ul>
                </td>
            </tr>
            <tr>
                <td>Regulatory Bodies</td>
                <td>
                    <ul>
                        <li>Safety standards</li>
                        <li>Approval process</li>
                        <li>Compliance monitoring</li>
                    </ul>
                </td>
                <td>
                    <ul>
                        <li>Public safety</li>
                        <li>Standard enforcement</li>
                        <li>Investigation authority</li>
                    </ul>
                </td>
            </tr>
        </table>
    </section>

    <script>
        // Demo ECG visualization and analysis
        const canvas = document.getElementById('ecgCanvas');
        const ctx = canvas.getContext('2d');
        const generateBtn = document.getElementById('generateECG');
        const analyzeBtn = document.getElementById('runAnalysis');
        const resultDiv = document.getElementById('analysisResult');
        const verificationForm = document.getElementById('verificationForm');
        const approveBtn = document.getElementById('approveBtn');

        // Simulate ECG data generation
        function generateECGData(length = 800) {
            const data = [];
            let phase = 0;
            
            for (let i = 0; i < length; i++) {
                // Simplified ECG wave simulation
                const baseline = 100;
                const noise = Math.random() * 2 - 1;
                
                if (phase === 0 && i % 200 === 0) {
                    // P wave
                    data.push(baseline + Math.sin(i * 0.1) * 10 + noise);
                } else if (phase === 1 && i % 200 === 50) {
                    // QRS complex
                    data.push(baseline - 20 + noise);
                    data.push(baseline + 60 + noise);
                    data.push(baseline - 15 + noise);
                    i += 2;
                } else if (phase === 2 && i % 200 === 100) {
                    // T wave
                    data.push(baseline + Math.sin(i * 0.05) * 15 + noise);
                } else {
                    data.push(baseline + noise);
                }
                
                if (i % 200 === 0) phase = (phase + 1) % 3;
            }
            
            return data;
        }

        // Draw ECG
        function drawECG(data) {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.beginPath();
            ctx.strokeStyle = '#059669';
            ctx.lineWidth = 2;
            
            data.forEach((value, index) => {
                if (index === 0) {
                    ctx.moveTo(index, value);
                } else {
                    ctx.lineTo(index, value);
                }
            });
            
            ctx.stroke();
        }

        // Simulate AI analysis
        function analyzeECG(data) {
            // Simplified analysis for demo
            const anomalyThreshold = 40;
            let anomalyCount = 0;
            
            data.forEach((value, index) => {
                if (index > 0) {
                    const diff = Math.abs(value - data[index - 1]);
                    if (diff > anomalyThreshold) anomalyCount++;
                }
            });
            
            return {
                anomalies: anomalyCount,
                confidence: Math.random() * 20 + 80,
                requiresReview: anomalyCount > 3
            };
        }

        // Event handlers
        generateBtn.addEventListener('click', () => {
            const data = generateECGData();
            drawECG(data);
            analyzeBtn.disabled = false;
            resultDiv.innerHTML = '';
            approveBtn.disabled = true;
            verificationForm.reset();
        });

        analyzeBtn.addEventListener('click', () => {
            const analysis = analyzeECG(generateECGData());
            
            resultDiv.innerHTML = `
                <h4>AI Analysis Results</h4>
                <p>Confidence: ${analysis.confidence.toFixed(1)}%</p>
                <p>Anomalies detected: ${analysis.anomalies}</p>
                <p class="${analysis.requiresReview ? 'warning' : 'normal'}">
                    ${analysis.requiresReview ? 
                        '⚠️ Requires immediate human review' : 
                        '✓ No significant anomalies detected'}
                </p>
            `;
            
            resultDiv.className = `analysis-result ${analysis.requiresReview ? 'warning' : 'normal'}`;
            approveBtn.disabled = false;
        });

        // Handle verification checklist
        verificationForm.addEventListener('change', () => {
            const checkboxes = verificationForm.querySelectorAll('input[type="checkbox"]');
            approveBtn.disabled = !Array.from(checkboxes).every(cb => cb.checked);
        });

        verificationForm.addEventListener('submit', (e) => {
            e.preventDefault();
            alert('Analysis verified and approved by human oversight.');
            verificationForm.reset();
            approveBtn.disabled = true;
        });

        // Initial ECG
        drawECG(generateECGData());
    </script>
</body>
</html>